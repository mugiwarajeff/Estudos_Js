<h1>
    Tag para video
</h1>

<video id="meuVideo" width="800" height="400" controls controlsList="nodownload" autoplay preload="metadata">
    <source src="http://files.cod3r.com.br/curso-web/video.mp4">
    não conseguimos executar
    </source>
</video>

<div wm-progresso="meuVideo" class="progresso">
    <div>0</div>
</div>

<div>
    <button wm-play="meuVideo" onclick="playVideo()">Play</button>
    <button wm-pause="meuVideo" onclick="pauseVideo()">Pause</button>
</div>


<style>
    .progresso {
        width: 400px;
        height: 20px;
        border: solid 1px black;
        margin: 20px
    }

    .progresso > div{
        background-color: red;
        color: white;
        font-size: 14px;
        width: 0%;
        height: 100%;
        text-align: right;
    }

</style>

<script>
    const video = document.getElementById("meuVideo");
    function playVideo(){
        video.play()
        moverBarra()
    }

    function pauseVideo(){
        video.pause()
    }

    function moverBarra(tempoVideo){
        const barra = document.querySelector("[wm-progresso] > div");
        let passo = 1;
        let callbackMovimento = setInterval(()=>{
            const tempoTotal = video.duration;
            const tempoAtual = parseInt(video.currentTime);
            barra.style.width = parseInt((tempoAtual/tempoTotal) * 100)+"%"
            barra.textContent = parseInt((tempoAtual/tempoTotal) * 100)+"%"
            passo += 1;
            if (barra.style.width === "100%"){
                clearInterval(callbackMovimento)
            }
        }, 440.5) //tempo de duração do video x 10 

    }
    
</script>